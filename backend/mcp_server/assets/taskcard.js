import e,{useState as Q}from"react";function C(t){if(!t)return null;try{let r=new Date(t),a=new Date,o=new Date(r.getFullYear(),r.getMonth(),r.getDate()),p=new Date(a.getFullYear(),a.getMonth(),a.getDate()),l=o.getTime()-p.getTime(),i=Math.floor(l/(1e3*60*60*24));return i===0?"Due today":i===1?"Due tomorrow":i===-1?"Overdue by 1 day":i>1&&i<=7?`Due in ${i} days`:i>7?`Due ${r.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}`:`Overdue by ${Math.abs(i)} days`}catch(r){return console.error("Error parsing due date:",r),null}}function P(t){if(!t)return!1;try{let r=new Date(t),a=new Date,o=new Date(r.getFullYear(),r.getMonth(),r.getDate()),p=new Date(a.getFullYear(),a.getMonth(),a.getDate());return o<p}catch{return!1}}function v(t){if(!t||t<=0)return null;if(t<60)return`${t} min`;let r=t/60;return r===1?"1 hour":`${Math.round(r*10)/10} hours`}function I(t){switch(t){case 5:return{background:"#ffebee",text:"#c62828",border:"#ef5350",label:"Urgent"};case 4:return{background:"#fff3e0",text:"#e65100",border:"#ff9800",label:"High"};case 3:return{background:"#fffde7",text:"#f57f17",border:"#fdd835",label:"Medium"};case 2:return{background:"#e8f5e9",text:"#2e7d32",border:"#66bb6a",label:"Low"};case 1:return{background:"#f5f5f5",text:"#616161",border:"#9e9e9e",label:"Very Low"}}}function O(t){switch(t){case 5:return{background:"#4a1a1a",text:"#ffcdd2",border:"#e57373",label:"Urgent"};case 4:return{background:"#4a2a1a",text:"#ffccbc",border:"#ffb74d",label:"High"};case 3:return{background:"#4a4a1a",text:"#fff9c4",border:"#ffee58",label:"Medium"};case 2:return{background:"#1a3a1a",text:"#c8e6c9",border:"#81c784",label:"Low"};case 1:return{background:"#2a2a2a",text:"#e0e0e0",border:"#bdbdbd",label:"Very Low"}}}function D(t,r){return r?O(t):I(t)}import{useState as M,useEffect as J}from"react";function $(){let[t,r]=M(null),[a,o]=M("light");J(()=>{if(typeof window<"u"&&window.openai){r(window.openai),o(window.openai.theme||"light");let l=()=>{window.openai&&o(window.openai.theme||"light")};return window.openai.onThemeChange&&window.openai.onThemeChange(l),()=>{window.openai?.offThemeChange&&window.openai.offThemeChange(l)}}else{let l=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";o(l)}},[]);let p=async(l,i)=>{if(!t)throw new Error("window.openai not available - not running in ChatGPT");try{return await t.callTool({name:l,arguments:i})}catch(s){throw console.error(`Failed to call tool "${l}":`,s),s}};return{isInChatGPT:!!t,theme:a,toolOutput:t?.toolOutput||null,callTool:p,openai:t}}var E=({task:t,score:r,reasoning:a,onTaskClick:o,className:p=""})=>{let{theme:l,toolOutput:i}=$(),s=l==="dark",u=i?.output||{task:t,score:r,reasoning:a},n=u.task||t,g=u.score??r,c=u.reasoning||a;if(!n)return e.createElement("div",{style:{padding:"16px",color:s?"#ffffff":"#000000"}},"No task data available");let f=D(n.priority,s),y=C(n.due_date),b=v(n.effort_estimate_minutes),k=P(n.due_date),d={background:s?"#1a1a1a":"#ffffff",text:s?"#ffffff":"#000000",textSecondary:s?"#b0b0b0":"#666666",border:s?"#404040":"#e0e0e0",accent:"#007aff"},H={fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica Neue', Arial, sans-serif",backgroundColor:d.background,border:`1px solid ${d.border}`,borderRadius:"8px",padding:"16px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)",cursor:o?"pointer":"default",transition:"box-shadow 0.2s ease, transform 0.2s ease",maxWidth:"600px",width:"100%"},F=o?{boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",transform:"translateY(-2px)"}:{},L={display:"inline-flex",alignItems:"center",gap:"6px",padding:"4px 12px",borderRadius:"12px",fontSize:"12px",fontWeight:"600",backgroundColor:f.background,color:f.text,border:`1px solid ${f.border}`},A={width:"8px",height:"8px",borderRadius:"50%",backgroundColor:f.border},z={fontSize:"18px",fontWeight:"600",color:d.text,margin:"12px 0 8px 0",lineHeight:"1.4"},W={fontSize:"14px",color:d.textSecondary,lineHeight:"1.5",margin:"0 0 12px 0"},U={display:"flex",flexWrap:"wrap",gap:"12px",alignItems:"center",fontSize:"13px",color:d.textSecondary,marginBottom:"12px"},x={display:"flex",alignItems:"center",gap:"4px"},_={...x,color:k?s?"#ffcdd2":"#c62828":d.textSecondary,fontWeight:k?"600":"400"},G={marginTop:"12px",padding:"12px",backgroundColor:s?"rgba(0, 122, 255, 0.1)":"rgba(0, 122, 255, 0.05)",borderRadius:"6px",border:`1px solid ${s?"rgba(0, 122, 255, 0.2)":"rgba(0, 122, 255, 0.15)"}`},N={display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},V={fontSize:"12px",fontWeight:"600",color:d.accent,textTransform:"uppercase",letterSpacing:"0.5px"},Y={fontSize:"20px",fontWeight:"700",color:d.accent},B={fontSize:"13px",color:d.text,lineHeight:"1.5",margin:"8px 0 0 0"},K={display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"8px",marginTop:"8px",fontSize:"12px"},m={display:"flex",justifyContent:"space-between",padding:"4px 0"},h={color:d.textSecondary},S={fontWeight:"600",color:d.text},[j,T]=Q(!1),R=()=>{o&&o(n.id)},q=w=>{o&&(w.key==="Enter"||w.key===" ")&&(w.preventDefault(),o(n.id))};return e.createElement("div",{className:p,style:{...H,...j?F:{}},onClick:R,onMouseEnter:()=>T(!0),onMouseLeave:()=>T(!1),onKeyDown:q,role:o?"button":"article",tabIndex:o?0:void 0,"aria-label":`Task: ${n.title}`},e.createElement("div",{style:L,"aria-label":`Priority: ${f.label}`},e.createElement("span",{style:A,"aria-hidden":"true"}),e.createElement("span",null,f.label)),e.createElement("h3",{style:z},n.title),n.description&&e.createElement("p",{style:W},n.description),e.createElement("div",{style:U},y&&e.createElement("div",{style:_,"aria-label":`Due date: ${y}`},e.createElement("span",{"aria-hidden":"true"},"\u{1F4C5}"),e.createElement("span",null,y)),b&&e.createElement("div",{style:x,"aria-label":`Estimated effort: ${b}`},e.createElement("span",{"aria-hidden":"true"},"\u23F1\uFE0F"),e.createElement("span",null,b)),n.tags&&e.createElement("div",{style:x,"aria-label":`Tags: ${n.tags}`},e.createElement("span",{"aria-hidden":"true"},"\u{1F3F7}\uFE0F"),e.createElement("span",null,n.tags))),g!==void 0&&c&&e.createElement("div",{style:G},e.createElement("div",{style:N},e.createElement("span",{style:V},"AI Score"),e.createElement("span",{style:Y,"aria-label":`Score: ${g.toFixed(1)}`},g.toFixed(1))),c.recommendation&&e.createElement("p",{style:B},c.recommendation),e.createElement("div",{style:K,"aria-label":"Scoring breakdown"},e.createElement("div",{style:m},e.createElement("span",{style:h},"Priority:"),e.createElement("span",{style:S},c.priority_score)),e.createElement("div",{style:m},e.createElement("span",{style:h},"Urgency:"),e.createElement("span",{style:S},c.deadline_urgency.toFixed(1))),e.createElement("div",{style:m},e.createElement("span",{style:h},"Effort:"),e.createElement("span",{style:S},c.effort_bonus)))))},X=E;var le="1.0.0";export{E as TaskCard,X as TaskCardDefault,le as VERSION,C as formatDueDate,v as formatEffort,D as getPriorityColors,O as getPriorityColorsDark,I as getPriorityColorsLight,P as isOverdue};

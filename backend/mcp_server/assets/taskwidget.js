import e,{useMemo as l}from"react";var a=class extends Error{constructor(n){super(n),this.name="AppsSDKError"}},s=class s{constructor(){if(!this.isAvailable())throw new a("window.openai not available. This component must run in ChatGPT.")}static getInstance(){return s.instance||(s.instance=new s),s.instance}isAvailable(){return typeof window<"u"&&!!window.openai}get theme(){return window.openai.theme}getToolOutput(){let n=window.openai.toolOutput;if(!n)throw new a("No tool output available");return n.output}async callTool(n){try{return await window.openai.callTool(n)}catch(r){throw new a(`Failed to call tool "${n.name}": ${r}`)}}async saveState(n){try{await window.openai.setWidgetState(n)}catch(r){throw new a(`Failed to save widget state: ${r}`)}}async loadState(){try{return await window.openai.getWidgetState()}catch(n){throw new a(`Failed to load widget state: ${n}`)}}getMetadata(){return window.openai.toolOutput?._meta||null}};s.instance=null;var c=s;function y(){return c.getInstance()}var T={1:"Very Low",2:"Low",3:"Medium",4:"High",5:"Urgent"},v=()=>{let x=y(),r=x.theme==="dark",{task:t,score:h,reasoning:p}=l(()=>x.getToolOutput(),[]),b=l(()=>{if(!t.due_date)return null;let i=new Date(t.due_date),u=new Date,g=i.getTime()-u.getTime(),d=Math.ceil(g/(1e3*60*60*24));return d<0?`Overdue by ${Math.abs(d)}d`:d===0?"Due today":d===1?"Due tomorrow":d<=7?`Due in ${d}d`:`Due ${i.toLocaleDateString()}`},[t.due_date]),m=l(()=>{if(!t.effort_estimate_minutes)return null;let i=t.effort_estimate_minutes;if(i<60)return`${i}m`;let u=Math.floor(i/60),g=i%60;return g>0?`${u}h ${g}m`:`${u}h`},[t.effort_estimate_minutes]),w=l(()=>t.due_date?new Date(t.due_date)<new Date:!1,[t.due_date]),f=l(()=>{let i={light:{5:{bg:"#ffebee",text:"#c62828",border:"#ef5350"},4:{bg:"#fff3e0",text:"#e65100",border:"#ff9800"},3:{bg:"#e3f2fd",text:"#1565c0",border:"#2196f3"},2:{bg:"#f3e5f5",text:"#6a1b9a",border:"#9c27b0"},1:{bg:"#f1f8e9",text:"#558b2f",border:"#8bc34a"}},dark:{5:{bg:"#4a1616",text:"#ffcdd2",border:"#e57373"},4:{bg:"#4a3116",text:"#ffe0b2",border:"#ffb74d"},3:{bg:"#162a4a",text:"#bbdefb",border:"#64b5f6"},2:{bg:"#391646",text:"#e1bee7",border:"#ba68c8"},1:{bg:"#2d4a16",text:"#dcedc8",border:"#aed581"}}};return r?i.dark[t.priority]:i.light[t.priority]},[t.priority,r]),o={bg:r?"#1a1a1a":"#ffffff",text:r?"#ffffff":"#000000",textSecondary:r?"#b0b0b0":"#666666",border:r?"#404040":"#e0e0e0",accent:"#007aff",scoreBg:r?"rgba(0, 122, 255, 0.1)":"rgba(0, 122, 255, 0.05)",scoreBorder:r?"rgba(0, 122, 255, 0.2)":"rgba(0, 122, 255, 0.15)"};return e.createElement("div",{style:{fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif",backgroundColor:o.bg,border:`1px solid ${o.border}`,borderRadius:"8px",padding:"16px",maxWidth:"600px",width:"100%"}},e.createElement("div",{style:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"4px 12px",borderRadius:"12px",fontSize:"12px",fontWeight:600,backgroundColor:f.bg,color:f.text,border:`1px solid ${f.border}`}},e.createElement("span",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:f.border}}),T[t.priority]),e.createElement("h3",{style:{fontSize:"18px",fontWeight:600,color:o.text,margin:"12px 0 8px 0",lineHeight:1.4}},t.title),t.description&&e.createElement("p",{style:{fontSize:"14px",color:o.textSecondary,lineHeight:1.5,margin:"0 0 12px 0"}},t.description),e.createElement("div",{style:{display:"flex",flexWrap:"wrap",gap:"12px",fontSize:"13px",color:o.textSecondary,marginBottom:"12px"}},b&&e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"4px",color:w?r?"#ffcdd2":"#c62828":o.textSecondary,fontWeight:w?600:400}},e.createElement("span",null,"\u{1F4C5}"),e.createElement("span",null,b)),m&&e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"4px"}},e.createElement("span",null,"\u23F1\uFE0F"),e.createElement("span",null,m)),t.tags&&e.createElement("div",{style:{display:"flex",alignItems:"center",gap:"4px"}},e.createElement("span",null,"\u{1F3F7}\uFE0F"),e.createElement("span",null,t.tags))),e.createElement("div",{style:{marginTop:"12px",padding:"12px",backgroundColor:o.scoreBg,borderRadius:"6px",border:`1px solid ${o.scoreBorder}`}},e.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"}},e.createElement("span",{style:{fontSize:"12px",fontWeight:600,color:o.accent,textTransform:"uppercase",letterSpacing:"0.5px"}},"AI Score"),e.createElement("span",{style:{fontSize:"20px",fontWeight:700,color:o.accent}},h.toFixed(1))),p.recommendation&&e.createElement("p",{style:{fontSize:"13px",color:o.text,lineHeight:1.5,margin:"8px 0 0 0"}},p.recommendation),e.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"8px",marginTop:"8px",fontSize:"12px"}},e.createElement("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0"}},e.createElement("span",{style:{color:o.textSecondary}},"Priority:"),e.createElement("span",{style:{fontWeight:600,color:o.text}},p.priority_score)),e.createElement("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0"}},e.createElement("span",{style:{color:o.textSecondary}},"Urgency:"),e.createElement("span",{style:{fontWeight:600,color:o.text}},p.deadline_urgency.toFixed(1))),e.createElement("div",{style:{display:"flex",justifyContent:"space-between",padding:"4px 0"}},e.createElement("span",{style:{color:o.textSecondary}},"Effort:"),e.createElement("span",{style:{fontWeight:600,color:o.text}},p.effort_bonus)))))};export{c as AppsSDK,a as AppsSDKError,v as TaskWidget,y as getSDK};
